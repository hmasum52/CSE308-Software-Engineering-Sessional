(self.webpackChunklite=self.webpackChunklite||[]).push([[9128],{50881:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RedeemGiftMembershipModal:()=>D});var a=n(63038),i=n.n(a),r=n(67294),o=n(38194),l=n(73178),m=n(98107),c=n(13791),s=n(18627),u=n(66411),d=n(77280),p=n(43487),x=n(50458),g=n(77355),f=n(47230),h=n(93310),E=n(8126),y=n(87691),k=function(e){var t=e.close,n=(0,p.v9)((function(e){return e.config.authDomain})),a=(0,p.v9)((function(e){return e.config.productName}));return r.createElement(g.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"580px"},r.createElement(E.F1,{tag:"h1",scale:"XL"},"Welcome to your ",a," membership."),r.createElement(g.x,{marginTop:"20px"},r.createElement(y.F,{scale:"L",color:"DARKER"},"Click the button below to start enjoying your membership access! Happy reading!")),r.createElement(g.x,{marginTop:"40px"},r.createElement(f.z,{buttonStyle:"BRAND",onClick:t},"Start reading")),r.createElement(g.x,{marginTop:"40px",marginBottom:"35px"},r.createElement(y.F,{tag:"span",scale:"L",color:"DARKER"},"Want to pay it forward? Click"," ",r.createElement(h.r,{href:(0,x.Ekm)(n),linkStyle:"OBVIOUS",inline:!0,target:"_blank"},"here")," ","to purchase a gift membership")))},b=n(21919),v=n(6443),R=n(31708),S=function(e){var t=e.errorType;return"BadRequest"===t?r.createElement(g.x,null,r.createElement(y.F,{scale:"S",color:"ERROR"},"You have entered an invalid code. Please try again or"," ",r.createElement(h.r,{href:(0,x.B$h)(),inline:!0,linkStyle:"OBVIOUS"},"contact customer support")," ","if you’ve tried multiple times.")):"TooManyRequests"===t?r.createElement(g.x,null,r.createElement(y.F,{scale:"S",color:"ERROR"},"You have reached your maximum number of redemption attempts. Please wait and try again, or"," ",r.createElement(h.r,{href:(0,x.B$h)(),inline:!0,linkStyle:"OBVIOUS"},"contact customer support."))):null},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"userRedeemGiftMembershipMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"giftCode"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userRedeemGiftMembership"},arguments:[{kind:"Argument",name:{kind:"Name",value:"giftCode"},value:{kind:"Variable",name:{kind:"Name",value:"giftCode"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},B=function(e){var t=e.close;return r.createElement(r.Fragment,null,r.createElement(g.x,{textAlign:"center",marginBottom:"30px"},r.createElement(y.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},"At this time we aren’t able to combine memberships. You can save your gift redemption code and apply it when your current membership is scheduled to renew. If you need further assistance,"," ",r.createElement(h.r,{href:(0,x.B$h)(),inline:!0,linkStyle:"OBVIOUS"},"contact customer support"),".")),r.createElement(g.x,{textAlign:"center",marginBottom:"30px"},r.createElement(f.z,{buttonStyle:"STRONG",size:"LARGE",onClick:t},"Ok")))};function T(e){return e.toLowerCase().replace(/\s/g,"")}var A=/^[a-z\d]{25}$/,w=/^[a-z\d]{26}$/,L=function(e){var t=e.giftCode,n=e.giftType,a=e.showConfirmationStep,o=e.close,m=((0,v.H)().value||{}).mediumMemberAt,c=(0,p.v9)((function(e){return e.config.productName})),s=function(e){return e?e.replace(/\s/g,"").replace(/(.{5})(?=.)/g,"$1 "):""},u=r.useState(s(t)),d=i()(u,2),k=d[0],L=d[1],D=r.useState(!t),O=i()(D,2),M=O[0],N=O[1],F=r.useState(""),G=i()(F,2),V=G[0],I=G[1],z=(0,b.D)(C,{onCompleted:function(e){var t=e.userRedeemGiftMembership,n=null==t?void 0:t.__typename;"GiftMembershipRedeemed"===n?(I(""),a()):"TooManyRequests"===n?(I("TooManyRequests"),N(!1)):(I("BadRequest"),N(!1))}}),W=i()(z,1)[0],K=r.useCallback((function(e){var t,n=s(e.target.value);L(n),t=T(n),A.test(t)||w.test(t)?N(!1):N(!0)}),[]);return r.createElement(g.x,{margin:"0 auto",sm:{width:"100%",paddingTop:"10px",textAlign:"left"}},r.createElement(g.x,{textAlign:"center",sm:{textAlign:"left"},marginBottom:"48px",marginTop:"48px"},r.createElement(g.x,{margin:"0 auto",sm:{width:"100%",textAlign:"center"},marginTop:"48px",marginBottom:"8px"},r.createElement(E.F1,{tag:"h1",scale:{xs:"L",sm:"L",md:"XL",lg:"XL",xl:"XL"}},m?"It looks like you are already a ".concat(c," member."):"Redeem your gift for unlimited reading."))),r.createElement(g.x,{tag:"form",display:"block",paddingLeft:"30px",paddingRight:"30px",margin:"0",sm:{width:"100%"}},m?r.createElement(B,{close:o}):r.createElement(g.x,{textAlign:"center"},r.createElement(g.x,{marginBottom:"24px"},r.createElement(y.F,{scale:"S",color:"DARKER"},"To start your membership, enter your redemption code below.")),r.createElement(g.x,{marginBottom:"40px",padding:"0 5px"},r.createElement(g.x,{maxWidth:"440px",marginBottom:"10px",marginLeft:"auto",marginRight:"auto"},r.createElement(R.n,{onChange:K,value:k,scale:"L",placeholder:"xxxxx xxxxx xxxxx xxxxx xxxxx",characterCountLimit:l.eh[n]})),r.createElement(g.x,null,r.createElement(S,{errorType:V}))),r.createElement(g.x,{marginLeft:"auto",marginRight:"auto"},r.createElement(g.x,null,r.createElement(f.z,{disabled:M,onClick:function(e){e.preventDefault(),N(!0),W({variables:{giftCode:T(k)}})},buttonStyle:"STRONG",size:"LARGE"},"Start my membership")),r.createElement(g.x,{paddingTop:"10px",paddingBottom:"20px",display:"block"},r.createElement(y.F,{scale:"S",color:"DARKER"},"By clicking “Start my membership,” you agree to"),r.createElement(y.F,{scale:"S",color:"DARKER"},"our"," ",r.createElement(h.r,{href:(0,x.Fp6)(),inline:!0,linkStyle:"OBVIOUS"},"Membership Terms of Service"),"."))))))},D=function(e){var t=e.isDialogVisible,n=e.hide,a=(0,l.lJ)((0,d.Wd)("giftType")),g=(0,d.Wd)("giftCode")||"",f=(0,p.v9)((function(e){return e.config.authDomain})),h=(0,s.Av)(),E=(0,u.Lk)(),y=r.useState(!1),b=i()(y,2),v=b[0],R=b[1],S=(0,o.M)(m.U).removeHash,C=r.useCallback((function(){R(!1),S(),n()}),[n,S]),B=r.useCallback((function(){S(),window.location.href=(0,x.cWJ)(f)}),[f,S]),T=r.useCallback((function(){R(!0)}),[]);return r.useEffect((function(){t&&h.event("liteGiftMembershipRedeemPage.viewed",{dimension:E&&E.dimension,locationId:E&&E.dimension})}),[t]),r.createElement(c.v,{isVisible:t,hide:v?B:C,withCloseButton:!0,confirmText:"",showCancelButton:!1,hideOnConfirm:!1},!v&&r.createElement(L,{giftCode:g,giftType:a,showConfirmationStep:T,close:C}),v&&r.createElement(k,{close:B}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/RedeemGiftMembershipModal.1be419e3.chunk.js.map